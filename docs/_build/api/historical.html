

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Historical Data Request &mdash; Accern Python 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'0.1.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="../examples/index.html" />
    <link rel="prev" title="Streaming API Client" href="stream.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Accern Python
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="schema.html">Schema Class/ Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">REST APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html">Streaming API Client</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Historical Data Request</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-historical-instance">Create Historical Instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-a-job">Set up a job</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-your-job-history">Check your job history</a></li>
<li class="toctree-l3"><a class="reference internal" href="#select-and-aggregations">Select and Aggregations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Accern Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">API</a> &raquo;</li>
        
      <li>Historical Data Request</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/historical.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="historical-data-request">
<span id="historical"></span><h1>Historical Data Request<a class="headerlink" href="#historical-data-request" title="Permalink to this headline">¶</a></h1>
<p>Accern Historical Batch data request is available for user who has the permission
to create a job(data request). The data can be downloaded when the job request is
finished.</p>
<div class="section" id="create-historical-instance">
<h2>Create Historical Instance<a class="headerlink" href="#create-historical-instance" title="Permalink to this headline">¶</a></h2>
<p>Create an Historical instance</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">accern</span> <span class="kn">import</span> <span class="n">HistoricalClient</span>
<span class="n">token</span> <span class="o">=</span> <span class="s1">&#39;YOUR TOKEN&#39;</span>
<span class="n">Client</span> <span class="o">=</span> <span class="n">HistoricalClient</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="set-up-a-job">
<h2>Set up a job<a class="headerlink" href="#set-up-a-job" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">description</span></code>, <code class="docutils literal"><span class="pre">filters</span></code> and <code class="docutils literal"><span class="pre">select</span></code> are required field to
create a job schema. For more detail of how to work with <code class="docutils literal"><span class="pre">filters</span></code> and
<code class="docutils literal"><span class="pre">select</span></code>, please refer to the <span class="xref std std-ref">Schema</span>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;request 2017 November data&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;harvested_at&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="s1">&#39;2017-11-01 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-11-30 23:59:59&#39;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="s1">&#39;entity_sentiment&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;entity_sentiment&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;entity_ticker&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;event&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;harvested_at&#39;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="check-your-job-history">
<h2>Check your job history<a class="headerlink" href="#check-your-job-history" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">resp</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">get_jobs</span><span class="p">()</span>
</pre></div>
</div>
<p>If you pass a job id to the <code class="docutils literal"><span class="pre">get_jobs</span></code> function, you will get the information
of that job.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">job_id</span> <span class="o">=</span> <span class="s1">&#39;YOUR JOB ID&#39;</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">get_jobs</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="select-and-aggregations">
<h2>Select and Aggregations<a class="headerlink" href="#select-and-aggregations" title="Permalink to this headline">¶</a></h2>
<p>You can add <code class="docutils literal"><span class="pre">minute</span></code>, <code class="docutils literal"><span class="pre">hour</span></code>, <code class="docutils literal"><span class="pre">day</span></code>, <code class="docutils literal"><span class="pre">week</span></code>, or <code class="docutils literal"><span class="pre">month</span></code>
aggregation function to the field <code class="docutils literal"><span class="pre">harvested_at</span></code>. The <code class="docutils literal"><span class="pre">alias</span></code> field should
match the function name you choose.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Month&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Month Sentiment data&#39;</span><span class="p">,</span>
    <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;harvested_at&#39;</span><span class="p">,</span>
            <span class="s1">&#39;alias&#39;</span><span class="p">:</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span>
            <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;month&#39;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The aggregation function will group signals based on the time interval you choose.
If your data will contain other fields, an aggregation function should be given.
Otherwise, an API error will occur.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Month&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Month Sentiment data&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;harvested_at&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="s1">&#39;2012-08-01 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-11-30 00:00:00&#39;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="s1">&#39;entity_sentiment&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="s1">&#39;entity_ticker&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s1">&#39;AAPL&#39;</span><span class="p">,</span>
                <span class="s1">&#39;AMZN&#39;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;entity_sentiment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;entity_ticker&#39;</span><span class="p">,</span>
            <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;group&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;harvested_at&#39;</span><span class="p">,</span>
            <span class="s1">&#39;alias&#39;</span><span class="p">:</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span>
            <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;month&#39;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A full list of the available aggregation functions can be found at <a class="reference internal" href="../appendix/aggregations.html#field-aggregate-function"><span class="std std-ref">Aggregation function</span></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../examples/index.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stream.html" class="btn btn-neutral float-left" title="Streaming API Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Accern Corp.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>